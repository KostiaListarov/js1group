<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <style>
        .title {
            text-align:center;
        }
    </style>
</head>
<body>

<h1 id="title" class="title"></h1>
<button id="generate-btn">Сгенерировать рассказ</button>
<div id="result"></div>

<script>

  // online версия https://jsfiddle.net/cp1uwL1g/14/

  // массив фраз <=> массиву с графами
  var text = [
    "Земля",
    "сгорает, или замерзает или падает на Солнце",
    "ученые",
    "подвергается нашествию",
    "сталкивается с огромной кометой",
    "и все гибнут.",
    "и почти все гибнут.",
    "создают",
    "открывают",
    "маленьких",
    "огромных",
    "и разрушается.",
    "и не разрушается, но",
    "и остается невредимой.",
    "маленьких",
    "огромных",
    "марсиан, селенитов, внегалактических чудовищ",
    "все гибнут.",
    "почти все гибнут.",
    "насекомых",
    "пресмыкающихся",
    "роботов",
    "внеземных существ",
    "различных странных предметов",
    "которые",
    "желают наших женщин",
    "ведут себя дружелюбно.",
    "ведут себя дружелюбно, но их никто не понимает",
    "не понимают нас",
    "отлично понимают нас",
    "воспринимают нас только как пищу",
    "похищают их и исчезают.",
    "и являются",
    "и съедают нас.",
    "радиоактивными",
    "нерадиоактивными",
    "и",
    "могут быть уничтожены",
    "не могут быть уничтожены",
    "толпой парней с факелами.",
    "сухопутной армией, морским флотом, авиацией, морской пехотой и (или) войсками береговой охраны.",
    "атомной бомбой.",
    "атомной бомбой",
    "сухопутной армией, морским флотом, авиацией, морской пехотой и (или) войсками береговой охраны",
    "толпой парней с факелами",
    "но ученые изобретают новое оружие",
    "но",
    "которое оказывает",
    "которое их убивает.",
    "которое превращает их в мерзкие глыбы.",
    "один хитрый парень убеждает их, что люди 'ОК'",
    "священник рассказывает им о Боге",
    "влюбляются в красивую девушку",
    "и они умирают.",
    "и они улетают.",
    "и они превращаются в мерзкие глыбы",
    "жентся и живут долго и счасливо.",
    "но они умирают от черной оспы.",
    "и поэтому они убивают нас.",
    "и поэтому они устанавливают систему доброжелательной диктатуры.",
    "и поэтому они съедают нас."
  ];

  // массив графа
  // осной индекс равен тексту из массива text по этому индексу
  var graf = [
    [1, 2, 3, 4],
    [5, 6],
    [7, 8],
    [9, 10],
    [11, 12, 13],
    [],
    [],
    [14, 15],
    [14, 15],
    [16],
    [16],
    [],
    [17, 18],
    [],
    [19, 20, 21, 22, 23],
    [19, 20, 21, 22, 23],
    [19, 20, 21, 22, 23],
    [],
    [],
    [24],
    [24],
    [24],
    [24],
    [24],
    [25, 26, 27, 28, 29, 30],
    [31, 32],
    [32],
    [32],
    [32],
    [32],
    [32, 33],
    [],
    [34, 35],
    [],
    [36],
    [36],
    [37, 38],
    [39, 40, 41],
    [42, 43, 44],
    [],
    [],
    [],
    [45, 46, 57, 58, 59, 60],
    [45, 46, 57, 58, 59, 60],
    [45, 46, 57, 58, 59, 60],
    [47, 48, 49],
    [50, 51, 52],
    [57, 58, 59, 60],
    [],
    [],
    [53, 54, 55],
    [53, 54, 55],
    [53, 54, 55, 56],
    [],
    [],
    [],
    [],
    [],
    [],
    [],
    []
  ];

  document.getElementById("title").innerHTML = "Добро пожаловать в нашу программу";

  document.getElementById('generate-btn').addEventListener('click', generate);

  function generate() {
    var start_index = 0,
      result = document.getElementById('result');

    // Пишем слово Земля
    result.innerHTML = text[start_index];

    do {
      // генерируем следующий случайный индекс из диапазона от 0 до длины подмассива в текущей итерации
      var random_index = Math.round((Math.random() * (graf[start_index].length - 1)));

      // получаем следующий текст который нужно вывести
      result.innerHTML += ' ' + text[graf[start_index][random_index]];

      // указываем новый индекс из графа, т.е. значение из подмассива будем считать за следующий индекс
      start_index = graf[start_index][random_index];

      // пробегаем по графу пока какой-нибудь из подмассивов не пустой.
    } while(graf[start_index].length);
  }
</script>

</body>
</html>